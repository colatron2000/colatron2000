const painel=document.createElement("div");painel.innerHTML=`<style>#painel-gemini{position:fixed;bottom:20px;right:20px;width:320px;max-height:500px;padding:15px;background:#1e1e1e;color:#f0f0f0;font-family:sans-serif;border-radius:10px;box-shadow:0 0 10px #000;z-index:9999;overflow-y:auto}#painel-gemini input,#painel-gemini textarea{width:100%;box-sizing:border-box;padding:8px;margin-bottom:10px;border-radius:5px;border:none}#painel-gemini button{width:100%;padding:8px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;cursor:pointer;font-weight:700}#painel-gemini #resposta{margin-top:10px;white-space:pre-wrap;background:#2a2a2a;padding:10px;border-radius:5px}#painel-gemini a{color:#4fc3f7;text-decoration:none;font-size:12px}#painel-gemini label{font-size:14px;margin-bottom:5px;display:block;color:#fff}#apikey{color:#4caf50!important}#pergunta{color:#000!important}#btn-esconder{position:absolute!important;top:8px!important;right:10px!important;background:none!important;border:none!important;color:#fff!important;font-size:12px!important;cursor:pointer!important;padding:2px 4px!important;width:auto!important}#btn-toggle{position:fixed;bottom:20px;right:20px;background:#000;color:#fff;border:none;border-radius:50%;width:36px;height:36px;font-size:16px;cursor:pointer;display:none;justify-content:center;align-items:center;z-index:9999}</style><div id="painel-gemini"><button id="btn-esconder">esconder</button><label>API Key do Gemini:</label><input type="text" id="apikey" placeholder="Cole sua API key aqui..." /><a href="https://aistudio.google.com/apikey" target="_blank">➜ Criar sua API Key (abre em nova aba)</a><label>Pergunta:</label><input type="text" id="pergunta" placeholder="Digite sua pergunta..." /><button id="btn">Enviar</button><div id="resposta">Esperando pergunta...</div></div><button id="btn-toggle">↑</button>`,document.body.appendChild(painel);const apikeyInput=document.querySelector("#apikey"),perguntaInput=document.querySelector("#pergunta"),respostaDiv=document.querySelector("#resposta"),botaoEnviar=document.querySelector("#btn"),botaoToggle=document.querySelector("#btn-toggle"),painelDiv=document.querySelector("#painel-gemini"),btnEsconder=document.querySelector("#btn-esconder"),defaultApiKey="AIzaSyDdvsuHkAsvDPA3mLFwPwLY7VZC6GOTL1M",savedKey=localStorage.getItem("gemini_apikey")||defaultApiKey;apikeyInput.value=savedKey;botaoEnviar.onclick=async()=>{let e=perguntaInput.value.trim(),t=apikeyInput.value.trim();if(!t){respostaDiv.textContent="Por favor, cole sua API Key.";return}if(!e){respostaDiv.textContent="Digite uma pergunta primeiro.";return}respostaDiv.textContent="Carregando...",localStorage.setItem("gemini_apikey",t);try{let o=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key="+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})}),n=await o.json(),i=n.candidates?.[0]?.content?.parts?.[0]?.text||"Sem resposta.";respostaDiv.textContent=i}catch(a){respostaDiv.textContent="Erro ao buscar resposta.",console.error(a)}};btnEsconder.onclick=()=>{painelDiv.style.display="none",botaoToggle.style.display="flex"},botaoToggle.onclick=()=>{painelDiv.style.display="block",botaoToggle.style.display="none"};
